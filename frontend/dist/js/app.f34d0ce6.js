(function(e){function t(t){for(var n,s,o=t[0],l=t[1],c=t[2],d=0,f=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&f.push(i[s][0]),i[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(n=!1)}n&&(r.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},i={app:0},r=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},"0515":function(e,t,a){"use strict";a("1df8")},"1df8":function(e,t,a){},"1e24":function(e,t,a){},4678:function(e,t,a){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=r,e.exports=i,i.id="4678"},"502f":function(e,t,a){"use strict";a("e0b3")},"52eb":function(e,t,a){"use strict";a("ca41")},"56d7":function(e,t,a){"use strict";a.r(t);var n=a("5530"),i=(a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("2b0e")),r=(a("202f"),a("f23d")),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("a-layout",{staticStyle:{}},[a("a-layout-header",{staticStyle:{background:"#f0f2f5"}},[a("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"RxImg","sub-title":"Reactive image processing"}},[a("template",{slot:"extra"},[e._v(" name: "),a("edit-select",{key:"2"})],1)],2)],1),a("a-layout-content",[a("a-row",{attrs:{gutter:8}},[a("a-col"),a("a-col",{attrs:{span:6}},[a("Element",{staticClass:"main-box-border",style:{height:.85*e.clientHeight+"px"}})],1),a("a-col",{attrs:{span:6}},[a("Observer",{staticClass:"main-box-border",style:{height:.85*e.clientHeight+"px"}})],1),a("a-col",{attrs:{span:6}},[a("Relations",{staticClass:"main-box-border",style:{height:.85*e.clientHeight+"px"}})],1),a("a-col",{attrs:{span:6}},[a("Viewer",{staticClass:"main-box-border",style:{height:.85*e.clientHeight+"px"}})],1)],1)],1),a("a-layout-footer",{staticStyle:{"text-align":"center"}},[e._v("copyright")])],1)],1)},o=[],l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("h1",[e._v("Observerables")]),a("div",{staticStyle:{"overflow-y":"auto"}},[a("a-card",{staticClass:"card",staticStyle:{width:"100%"},attrs:{title:"",hoverable:!1,headStyle:e.headTools}},[a("a",{attrs:{slot:"extra",href:"#"},slot:"extra"},[a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},on:{click:function(t){return e.newRelation(e.observerKeys[t.key])}},slot:"overlay"},e._l(e.observerKeys,(function(t,n){return a("a-menu-item",{key:n},[a("a-icon",{attrs:{type:"swap-right"}}),e._v(e._s(e.repr(t))+" ")],1)})),1),a("a-button",{staticStyle:{"margin-left":"8px"}},[e._v(" New "),a("a-icon",{attrs:{type:"plus-circle"}})],1)],1),a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},on:{click:function(t){return e.newSubject(e.relationKeys[t.key])}},slot:"overlay"},e._l(e.relationKeys,(function(t,n){return a("a-menu-item",{key:n},[a("a-icon",{attrs:{type:"swap-right"}}),e._v(e._s(e.repr(t))+" ")],1)})),1),a("a-button",{staticStyle:{"margin-left":"8px"}},[e._v(" Subject "),a("a-icon",{attrs:{type:"plus-circle"}})],1)],1),a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},on:{click:function(t){return e.newSubscribe(e.relationKeys[t.key])}},slot:"overlay"},e._l(e.relationKeys,(function(t,n){return a("a-menu-item",{key:n},[a("a-icon",{attrs:{type:"swap-right"}}),e._v(e._s(e.repr(t))+" ")],1)})),1),a("a-button",{staticStyle:{"margin-left":"8px"}},[e._v(" Subscirbe "),a("a-icon",{attrs:{type:"plus-circle"}})],1)],1)],1)]),e._l(e.relationsData,(function(t,n){return a("div",{key:n},[a("a-space",{staticStyle:{width:"100%"},attrs:{direction:"vertical"}},["observerable"==t.type||"subject"==t.type?a("div",[a("a-card",{staticClass:"card",staticStyle:{width:"100%"},attrs:{title:e.repr(t.args.head.value),headStyle:e.headHead}},[a("a",{attrs:{slot:"extra",href:"#"},slot:"extra"},[a("a-button-group",["observerable"==t.type?a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},on:{click:function(t){return e.addPipe({key:n,pipe_uuid:e.observerKeys[t.key]})}},slot:"overlay"},e._l(e.observerKeys,(function(t,n){return a("a-menu-item",{key:n},[a("a-icon",{attrs:{type:"swap-right"}}),e._v(e._s(e.repr(t))+" ")],1)})),1),a("a-button",{staticStyle:{"margin-left":"8px"}},[e._v(" Pipe "),a("a-icon",{attrs:{type:"plus-circle"}})],1)],1):e._e(),a("a-button",{on:{click:function(t){return e.newRelation(n)}}},[a("a-icon",{attrs:{type:"copy"}})],1),a("a-button",{on:{click:function(t){return e.deleteRelation(n)}}},[a("a-icon",{attrs:{type:"delete"}})],1)],1)],1),"observerable"==t.type?a("div",[e.isEmputy(t.args.pipe.value)?a("span",[e._v(" EmputyPipe ")]):a("span",[a("draggable",{attrs:{group:"people"},on:{start:function(t){e.drag=!0},end:function(t){return e.endDrag(t,n)}},model:{value:t.args.pipe.value,callback:function(a){e.$set(t.args.pipe,"value",a)},expression:"item.args.pipe.value"}},e._l(t.args.pipe.value,(function(t,i){return a("span",{key:i},[t?a("a-tag",{attrs:{closable:""},on:{close:function(t){return e.tagDeletePipe(n,i)}}},[e._v(" "+e._s(e.repr(t))+" ")]):e._e()],1)})),0)],1)]):e._e(),a("div",{staticClass:"itemUuid"},[e._v(e._s(n))])])],1):e._e(),"subscribe"==t.type?a("div",[a("a-card",{staticClass:"card",staticStyle:{width:"100%"},attrs:{title:e.repr(t.args.head.value),headStyle:e.headSubscribe}},[a("a",{attrs:{slot:"extra",href:"#"},slot:"extra"},[a("a-button-group",[a("a-button",{on:{click:function(t){return e.deleteRelation(n)}}},[a("a-icon",{attrs:{type:"delete"}})],1)],1)],1),a("a-select",{staticStyle:{width:"60%"},attrs:{"default-value":e.repr(t.args.subscribe.value)},on:{change:function(t){return e.setSubscribe({key:n,subscribe_uuid:t})}}},e._l(e.observerKeys,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t}},[e._v(" "+e._s(e.repr(t))+" ")])})),1)],1)],1):e._e()])],1)}))],2)])},c=[],u=(a("159b"),a("2f62"));a("fb6a"),a("d3b7"),a("b64b"),a("4e82"),a("07ac");function d(e){return"String"==Object.prototype.toString.call(e).slice(8,-1)}function f(e){var t;if(null==e)return!0;switch(t=Object.prototype.toString.call(e).slice(8,-1),t){case"Array":return!e.length;case"Object":return 0==Object.keys(e).length;default:return!1}}function p(e){return Object.values(e).sort((function(e,t){return e.index-t.index}))}var h=a("b76a"),m=a.n(h),b={name:"Relations",data:function(){return{headTools:{background:"#348498",color:"white","font-size":"x-large"},headHead:{background:"#8bc6af",color:"white","font-size":"x-large"},headSubscribe:{background:"#FFC329",color:"white","font-size":"x-large"}}},components:{draggable:m.a},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(u["c"])("relations",{relationKeys:"keys"})),Object(u["c"])("observers",{observerKeys:"keys"})),Object(u["c"])(["repr"])),Object(u["e"])("relations",{relationsData:"data",changeTimes:"contentChangeTimes"})),{},{nullHeadObserverKeys:function(){var e=[];return this.observerKeys.forEach((function(t){e.push(t)})),e}}),methods:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(u["b"])(["save"])),Object(u["d"])("relations",["newRelation","newSubscribe","addPipe","setSubscribe","deletePipe","cleanSubscribe","swapPipes","deleteRelation","newSubject","IdentityObserverable"])),{},{tagDeletePipe:function(e,t){this.deletePipe({key:e,pipe_index:t})},isEmputy:f,endDrag:function(e,t){this.drag=!1,this.swapPipes({relationIndex:t,oldIndex:e.oldIndex,newIndex:e.newIndex})}}),watch:{changeTimes:function(e){this.save()}}},v=b,g=(a("52eb"),a("2877")),y=Object(g["a"])(v,l,c,!1,null,"7581b79c",null),j=y.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"viewbox",staticClass:"main",attrs:{id:"viewbox"}},[a("h1",[e._v("Viewer")]),a("a-card",{staticClass:"card",staticStyle:{width:"100% margin-bottom:16px"},attrs:{title:"",hoverable:!1,headStyle:e.headTools}},[a("a",{attrs:{slot:"extra",href:"#"},slot:"extra"},[a("a-button",{staticStyle:{"margin-right":"4px"},on:{click:e.execute}},[e._v("Execute "),a("a-icon",{attrs:{type:"play-circle"}})],1),a("a-button",{on:{click:e.cleanLogs}},[e._v("Clean "),a("a-icon",{attrs:{type:"delete"}})],1)],1),e._l(e.parameters,(function(t,n){return a("a-row",{key:n},[a("a-col",{attrs:{span:22}},[a("parameter",{attrs:{type:t.args.input_.type,name:t.tag,value:t.args.input_.value,viewType:!0},on:{emitValue:e.parameterChange}})],1),a("a-col",{attrs:{span:2}},[a("a-button",{attrs:{icon:"delete"},on:{click:function(a){return e.parameterDel(t.tag)}}})],1)],1)}))],2),a("div",{staticStyle:{"margin-top":"16px overflow-y: auto"}},[a("a-timeline",e._l(e.resultsLog,(function(t,n){return a("div",{key:n},["result"==t.type&&1==t.visible?a("a-timeline-item",[a("div",[a("li",[e._v(" "+e._s(t.name)+" ")]),a("span",[e._l(t.args,(function(t,n){return a("a-tag",{key:n},[e._v(e._s(t))])})),e._l(t.kwargs,(function(t,n){return a("a-tag",{key:n},[e._v(e._s(t))])}))],2),"imshow"==t.ret.type?a("a",[a("div",{staticClass:"box"},[a("img",{attrs:{src:e.imgurl(t.ret.imname)}})])]):"print"==t.ret.type?a("a",[e._v(" "+e._s(t.ret.show)+" ")]):"NDARRAY"==t.ret.type?a("a",[a("NDArray",{attrs:{title:t.ret.repr,id:t.ret.id,winWidth:e.domWidth}})],1):a("a",[a("a-tag",[e._v(e._s(t.ret)+e._s(t.ret.type)+e._s("imshow"==t.ret.type))])],1)])]):e._e(),"exception"==t.type?a("div",[e._v(" "+e._s(t.trace)+" ")]):e._e()],1)})),0)],1)],1)},w=[],O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.viewType?e._e():a("a-row",[a("a-col",{attrs:{span:4}},[e._v(" name: ")]),a("a-col",{attrs:{span:20}},[a("a-input",{staticStyle:{width:"100%"},on:{input:e.nameChange}})],1)],1),a("a-row",[e.viewType?a("a-col",{attrs:{span:4}},[e._v(" "+e._s(e.name)+" ")]):e._e(),a("a-col",{attrs:{span:16}},["bool"==e.data.type?a("div",[a("a-switch",{attrs:{defaultChecked:e.data.value},on:{change:e.inputChange}})],1):"int"==e.data.type?a("div",[a("a-input-number",{staticStyle:{width:"100%"},attrs:{defaultValue:e.data.value},on:{change:e.inputChange}})],1):"float"==e.data.type?a("div",[a("a-input-number",{staticStyle:{width:"100%"},attrs:{defaultValue:e.data.value,step:.1},on:{change:e.inputChange}})],1):"ref"==e.data.type?a("div",[a("a-input",{staticStyle:{width:"100%"},attrs:{defaultValue:e.data.value},on:{change:e.inputChange}})],1):"str"==e.data.type?a("div",[a("a-input",{staticStyle:{width:"100%"},attrs:{defaultValue:e.data.value},on:{input:e.lineChange}})],1):"tuple"==e.data.type?a("div",[a("a-input",{staticStyle:{width:"100%"},attrs:{defaultValue:e.data.value},on:{input:e.tupleChange}})],1):e._e()]),a("a-col",{attrs:{span:4}},[a("a-select",{attrs:{"default-value":e.data.type},on:{change:e.handleTypeChange}},e._l(e.typeOptions,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t}},[e._v(e._s(t)+" ")])})),1)],1)],1),a("a-row",[e.alertValue?a("a-alert",{attrs:{message:e.alertValue,banner:""}}):e._e()],1)],1)},x=[],k=(a("b0c0"),a("ac1f"),{name:"Parameter",props:{viewType:{default:!0,type:Boolean},type:{default:"str",type:String},name:{default:"",type:String},value:null},data:function(){return{typeOptions:["int","float","bool","str","tuple"],data:{type:this.type,name:this.name,value:this.value},alertValue:""}},methods:{emitOut:function(){this.$emit("emitValue",{type:this.data.type,name:this.data.name,value:this.data.value})},inputChange:function(e){this.data.value=e,this.emitOut()},tupleChange:function(e){e=e.target.value,this.data.value=e;var t=/^\([0-9,]+\)$/gm,a=t.exec(e);null!=a?(this.emitOut(),this.alertValue=""):this.alertValue="tuple format: ([0-9,])."},lineChange:function(e){this.data.value=e.target.value,this.emitOut()},nameChange:function(e){this.data.name=e.target.value,this.emitOut()},handleTypeChange:function(e){switch(e){case"int":this.data.value=0;break;case"float":this.data.value=0;break;case"str":this.data.value="";break;case"bool":this.data.value=!1;break;default:break}this.data.type=e}}}),S=k,C=Object(g["a"])(S,O,x,!1,null,null,null),R=C.exports,V=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"overflow-y":"hidden"}},[e.titleStr?a("div",[a("a-tag",{on:{click:e.swithTitle}},[e._v(e._s(e.titleStr))])],1):a("div",[e.winHeight?a("div",{on:{mousewheel:function(t){return t.preventDefault(),e.scrollevent.apply(null,arguments)}}},[a("div",{style:{width:e.winWidth+"px",height:e.winHeight+"px"},attrs:{id:"wrapper"+e.id}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.pixShow,expression:"pixShow"}]},[a("div",{attrs:{id:"pixContainer"+e.id}})]),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.pixShow,expression:"!pixShow"}]},[a("img",{attrs:{id:"imgContainer"+e.id}})])])]):e._e()])])},D=[],T=a("1da1"),I=a("53ca"),z=(a("96cf"),a("a9e3"),a("99afe")),P=a("bc3a"),E=a.n(P),N=a("8bb0"),L=N.Image,A={name:"NDArray",props:{winWidth:Number,title:String,id:String},data:function(){return{titleStr:this.title,winHeight:0,pixShow:!1,imgShape:{width:0,height:0,resizeRaito:1},imgHandle:Object,maxScale:-1,r_zoom:1,pixshowGrid:32}},watch:{winHeight:function(){this.imgHandle.then(this.procceImage)}},computed:{imgurl:function(){var e=this.$apiurl+"/ndarray/"+this.id;return console.log("imgurl",e),e},zoomStep:function(){return this.r_zoom<=3?.2:1}},methods:{swithTitle:function(){this.titleStr="";var e=this.$apiurl+"/ndarray/"+this.id;console.log(e,Object(I["a"])(e)),this.imgHandle=L.load(e),this.imgHandle.then(this.setImageHeight)},getPix:function(e){var t=this;return Object(T["a"])(regeneratorRuntime.mark((function a(){var n,i,r,s,o,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.x,i=e.y,r=e.width,s=e.height,o=t.$apiurl+"/ndarrayPix",a.next=4,E.a.post(o,{id:t.id,xmin:n,ymin:i,xmax:n+r,ymax:i+s});case 4:l=a.sent,t.heatmapPlot.update({data:l.data.data}),t.pixShow=!0;case 7:case"end":return a.stop()}}),a)})))()},scrollevent:function(e){var t=this,a=0;e||(e=window.event),e.wheelDelta?(a=e.wheelDelta/120,window.opera&&(a=-a)):e.detail&&(a=-e.detail/3),this.r_zoom+=a*this.zoomStep;var n=this.imgShape.width/this.winWidth;this.r_zoom>=this.maxScale?this.r_zoom=this.maxScale:this.r_zoom<=1&&(this.r_zoom=1);var i={x:e.offsetX*n*(1-1/this.r_zoom),y:e.offsetY*n*(1-1/this.r_zoom),width:this.imgShape.width/this.r_zoom,height:this.imgShape.height/this.r_zoom};this.r_zoom==this.maxScale?this.getPix(i):1<this.r_zoom<this.maxScale&&(this.pixShow=!1,this.imgHandle.then((function(e){document.getElementById("imgContainer"+t.id).src=e.crop(i).resize({width:t.winWidth,height:t.winHeight}).toDataURL()})))},setImageHeight:function(e){this.imgShape.width=e.width,this.imgShape.height=e.height,e.width>this.winWidth&&(this.imgShape.resizeRaito=this.winWidth/e.width),this.winHeight=e.height*this.imgShape.resizeRaito,this.maxScale=this.imgShape.width*this.pixshowGrid/this.winWidth,this.r_zoom=1,console.log("init zoom scale",this.winHeight,this.maxScale,this.r_zoom)},procceImage:function(e){document.getElementById("imgContainer"+this.id).src=e.resize({width:this.winWidth,height:this.winHeight}).toDataURL();var t=new z["Heatmap"](document.getElementById("pixContainer"+this.id),{xField:"x",yField:"y",xAxis:!1,yAxis:!1,colorField:"v",color:["#dddddd","#9ec8e0","#5fa4cd","#2e7ab6","#114d90"],tooltip:{fields:["x","y","v"]},reflect:"y",label:{formatter:function(e){return e.format},style:{fill:"#fff",shadowBlur:2,shadowColor:"rgba(0, 0, 0, .45)",fontSize:8}},axis:!1,data:{},autoFit:!1,width:this.winWidth,height:this.winHeight});t.render(),this.heatmapPlot=t}}},F=A,$=(a("626f"),Object(g["a"])(F,V,D,!1,null,"697dfe12",null)),H=$.exports,K={name:"Viewer",props:{msg:String},components:{Parameter:R,NDArray:H},data:function(){return{headTools:{background:"#348498",color:"white","font-size":"x-large"},domWidth:null}},mounted:function(){this.domWidth=this.$refs.viewbox.clientWidth},computed:Object(n["a"])({},Object(u["e"])("views",{resultsLog:"logs",parameters:"parameters"})),methods:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(u["b"])(["save"])),Object(u["d"])("views",["cleanLogs","addParameter","delParameter"])),{},{imgurl:function(e){return this.$apiurl+"/ndarray/"+e},execute:function(){this.$socket.emit("execute_event","start")},parameterChange:function(e){this.addParameter(e),this.save()},parameterDel:function(e){this.delParameter(e),this.save()}})},B=K,W=(a("c6bc"),Object(g["a"])(B,_,w,!1,null,"60403ef4",null)),U=W.exports,Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("h1",[e._v("Operators")]),e._l(e.allObserver,(function(t,n){return a("div",{key:n},[a("a-space",{staticStyle:{width:"100%"},attrs:{direction:"vertical"}},[a("a-card",{staticClass:"card",staticStyle:{width:"100%",display:"block"},attrs:{title:e.repr(t.uuid),hoverable:!0}},[a("a",{attrs:{slot:"extra",href:"#"},slot:"extra"},[a("a-button",{on:{click:function(a){return e.deleteItem(t)}}},[a("a-icon",{attrs:{type:"delete"}})],1)],1),"lambda"==t.type?[a("div",[a("a-tag",{staticStyle:{"background-color":"#ebb471"}},[e._v(e._s(t.line)+" ")])],1)]:[e._l(e.sortObj(t.args),(function(n,i){return a("a-tag",{key:i,staticClass:"argitems",style:e.tagStyle[e.viewValue(n.value)],on:{click:function(a){return e.tagToTitile(t.uuid,n.name)}}},[a("a",[e._v(e._s(n.index))]),a("a-divider",{attrs:{type:"vertical"}}),a("a",[e._v(e._s(n.name))]),a("a-divider",{attrs:{type:"vertical"}}),a("a",[e._v(e._s(e.viewValue(n.value)))]),a("a-divider",{attrs:{type:"vertical"}}),a("a",[e._v(e._s(n.type))])],1)})),t.output?a("span",e._l(t.output,(function(t,n){return a("span",{key:n},[a("a-tag",[e._v("return["+e._s(t)+"]")])],1)})),0):a("span",[a("a-tag",[e._v("return[0]")])],1)],a("div",{staticClass:"itemUuid"},[e._v(e._s(t.uuid))])],2)],1)],1)}))],2)},M=[],X=(a("25f0"),{name:"Observer",data:function(){return{tagStyle:{"-":{background:"#FFC329"},"parse error":{background:"red"}}}},props:{msg:String},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(u["c"])("observers",["allObserver","breifTitleByUUID"])),Object(u["e"])("relations",{allRelations:"data"})),Object(u["c"])(["repr"])),methods:Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])({sortObj:p},Object(u["d"])("observers",["deleteObservers","editArgInObservers"])),Object(u["d"])("relations",["addRelation","addRelationOn"])),Object(u["d"])("views",["flushViews"])),{},{viewValue:function(e){if(null==e||void 0==e)return"-";if(!d(e)){if(e instanceof Array){var t="[";for(var a in e)t=t+e[a]+",";return t+="]",t}return e.toString()}return"@"==e[0]?this.repr(e):void 0},addHead:function(e){console.log("head item",e);var t={head:e.uuid,name:e.name,pipe:[],subscribe:null};this.addRelation(t)},addPipe:function(e){this.addRelationOn({type:"pipe",item:e})},setSubscribe:function(e){this.addRelationOn({type:"subscribe",item:e})},deleteItem:function(e){this.deleteObservers(e)},tagToTitile:function(e,t){this.editArgInObservers({index:e,argname:t,key:"title_tag",value:!0})}})}),q=X,G=(a("0515"),Object(g["a"])(q,Y,M,!1,null,"0de9c265",null)),J=G.exports,Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("h1",[e._v("Library")]),a("a-auto-complete",{staticStyle:{width:"100%"},attrs:{"data-source":e.history,placeholder:"input here"},model:{value:e.seach_feild,callback:function(t){e.seach_feild=t},expression:"seach_feild"}},[a("a-input",[a("a-icon",{attrs:{slot:"suffix",type:"search"},slot:"suffix"})],1)],1),a("a-collapse",{staticClass:"ele-collapse",attrs:{accordion:"","default-active-key":"cv2"},model:{value:e.activeKey,callback:function(t){e.activeKey=t},expression:"activeKey"}},e._l(e.elements,(function(t,n){return a("a-collapse-panel",{key:n,attrs:{header:n,disabled:0==Object.keys(t).length}},[a("div",{staticStyle:{"max-height":"200px","overflow-y":"auto"}},e._l(t,(function(t,n){return a("p",{key:n,on:{click:function(a){return e.submitElement(t)}}},[e._v(" "+e._s(t.name)+" ")])})),0)])})),1),e.functionData?a("Factory"):e._e()],1)},Z=[],ee=(a("caad"),a("2532"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[e.functionData.type?a("div",[a("a-divider",{staticClass:"fac-divider",attrs:{orientation:"left"}},[e._v(" "+e._s(e.functionData.name)+" ")]),a("p",{staticStyle:{display:"flex","flex-flow":"row nowrap","justify-content":"space-between"}},[a("span",[a("a-button",[e._v(e._s(e.functionData.returnType))])],1),a("span",[a("a-select",{staticStyle:{width:"120px"},attrs:{"default-value":""},on:{change:e.setOp}},[a("a-select-option",{attrs:{value:""}},[e._v(" direct ")]),a("a-select-option",{attrs:{value:"map"}},[e._v(" map ")])],1)],1),a("span",{staticStyle:{display:"flex","flex-wrap":"nowrap","justify-content":"flex-end"}},[e.lockedStatus?a("a-button",{on:{click:function(t){return e.setLocked(!1)}}},[a("a-icon",{attrs:{type:"lock"}})],1):e._e(),a("a-button",{staticStyle:{background:"@red-1"},on:{click:e.submitFunction}},[e._v("Submit")])],1)]),a("div",{on:{mouseenter:e.mouseenterDom}},["callable"===e.functionData.type?a("div",[a("a-form",{attrs:{title:e.functionData.name}},[e._l(e.sortObj(e.functionData.args),(function(t,n){return a("div",{key:n,attrs:{label:t.name}},[a("arg-item",{attrs:{name:t.name,defaultValue:t.value,type:t.type,args:t,ranges:t.ranges},on:{emitValue:function(a){return e.setArgValue(a,t.name)}}})],1)})),e._l(e.functionData.return,(function(t){return a("div",{key:t.name,attrs:{label:t.name}},[a("a-switch",{model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"rt.value"}})],1)}))],2)],1):"lambda"==e.functionData.type?a("div",[a("span",[a("a-select",{staticStyle:{width:"100%"},attrs:{mode:"multiple",placeholder:"x0","option-label-prop":"label"},model:{value:e.lambda.argValue,callback:function(t){e.$set(e.lambda,"argValue",t)},expression:"lambda.argValue"}},e._l(e.lambda.argLists,(function(t){return a("a-select-option",{key:t,attrs:{value:t,label:t}},[e._v(" "+e._s(t)+" ")])})),1),a("a-mentions",{model:{value:e.lambda.line,callback:function(t){e.$set(e.lambda,"line",t)},expression:"lambda.line"}},e._l(e.lambda.argLists,(function(t){return a("a-mentions-option",{key:t,attrs:{value:t}},[a("span",[e._v(e._s(t))])])})),1)],1)]):"parameter"==e.functionData.type?a("div",[a("parameter",{attrs:{viewType:!1},on:{emitValue:e.setParameter}})],1):"file"==e.functionData.type?a("div",[a("FileBox",{on:{sendArgData:function(t){return e.setArgValue(t,"dirs")}}})],1):e._e()])],1):a("div",[a("a-empty",{attrs:{description:!1}})],1)])}),te=[],ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-row",[e.valueFromRefs?a("div",[a("a-col",{attrs:{span:6}},[e._v(" "+e._s(e.name)+": ")]),a("a-col",{attrs:{span:2}},[a("a-button",{on:{mouseover:function(t){return e.setValueFromRefs(!1)},mouseleave:e.clearTimeout}},[a("a-icon",{attrs:{type:"edit"}})],1)],1),a("a-col",{attrs:{span:16}},[a("a-select",{staticStyle:{width:"100%"},on:{change:e.changeRefSelect}},e._l(e.allRefable,(function(t,n){return a("a-select-option",{key:n},[e._v(" "+e._s(e.repr(t))+" ")])})),1)],1)],1):e._e(),e.valueFromRefs?e._e():a("div",[a("a-col",{attrs:{span:6}},[e._v(" "+e._s(e.name)+": ")]),a("a-col",{attrs:{span:12}},["bool"==e.type?a("div",[a("a-switch",{staticStyle:{width:"100%"},attrs:{"default-checked":e.defaultValue},on:{change:e.inputChange}})],1):"int"==e.type?a("div",[a("a-input-number",{staticStyle:{width:"100%"},attrs:{defaultValue:e.defaultValue},on:{change:e.inputChange}})],1):"float"==e.type?a("div",[a("a-input-number",{staticStyle:{width:"100%"},attrs:{step:.1,defaultValue:e.defaultValue},on:{change:e.inputChange}})],1):"choices"==e.type?a("div",[a("a-select",{staticStyle:{width:"100%"},attrs:{"label-in-value":"",defaultValue:{key:"default"}},on:{change:e.changeChoicesSelect}},e._l(e.args.choices,(function(t,n){return a("a-select-option",{key:n},[e._v(" "+e._s(n)+"["+e._s(t)+"] ")])})),1)],1):"list"==e.type?a("div",[a("List",{on:{change:e.inputChange}})],1):"tuple"==e.type?a("div",[a("a-input",{staticStyle:{width:"100%"},attrs:{defaultValue:e.defaultValue},on:{input:e.tupleChange}})],1):a("div",[a("a-input",{staticStyle:{width:"100%"},attrs:{defaultValue:e.defaultValue},on:{input:e.lineChange}})],1),e.alertValue?a("a-alert",{attrs:{message:e.alertValue,banner:""}}):e._e()],1),a("a-col",{attrs:{span:4}},[a("a-button",[e._v(e._s(e.type))])],1),a("a-col",{attrs:{span:2}},[a("a-button",{on:{mouseover:function(t){return e.setValueFromRefs(!0)},mouseleave:e.clearTimeout}},[a("a-icon",{attrs:{type:"paper-clip"}})],1)],1)],1)])],1)},ne=[],ie=(a("2ca0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{visible:e.visible,title:"List"},on:{ok:e.handleOk,cancel:function(t){return e.setVisible(!1)}}},[a("a-row",[a("a-col",{attrs:{span:20}},[a("a-select",{staticStyle:{width:"100%"},attrs:{"default-value":"int"},model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},e._l(e.typeOptions,(function(t,n){return a("a-select-option",{key:n,attrs:{value:t}},[e._v(e._s(t)+" ")])})),1)],1),a("a-col",{attrs:{span:4}},[a("a-button",{attrs:{icon:"plus"},on:{click:e.addItem}})],1)],1),e._l(e.items,(function(t,n){return a("a-row",{key:n},[a("a-col",{attrs:{span:20}},["bool"==t.type?a("div",[a("a-switch",{attrs:{"default-checked":t.defaultValue},on:{change:function(t){return e.inputChange(t,n)}}})],1):"int"==t.type?a("div",[a("a-input-number",{staticStyle:{width:"100%"},attrs:{defaultValue:t.defaultValue},on:{change:function(t){return e.inputChange(t,n)}}})],1):"float"==t.type?a("div",[a("a-input-number",{staticStyle:{width:"100%"},attrs:{step:.1,defaultValue:t.defaultValue},on:{change:function(t){return e.inputChange(t,n)}}})],1):"ref"==t.type?a("div",[a("a-select",{staticStyle:{width:"100%"},on:{change:function(t){return e.changeRefSelect(t,n)}}},e._l(e.allRefable,(function(t,n){return a("a-select-option",{key:n},[e._v(" "+e._s(e.repr(t))+" ")])})),1)],1):"str"==t.type?a("div",[a("a-input",{staticStyle:{width:"100%"},attrs:{defaultValue:t.defaultValue},on:{input:function(t){return e.lineChange(t,n)}}})],1):e._e()]),a("a-col",{attrs:{span:4}},[a("a-button",{attrs:{icon:"close"},on:{click:function(t){return e.delItem(t,n)}}})],1)],1)}))],2),a("a-button",{staticStyle:{width:"100%"},on:{click:function(t){return e.setVisible(!0)}}},[e._v("List["+e._s(e.lenItem)+"]")])],1)}),re=[],se=(a("d81d"),{name:"List",data:function(){return{items:[],emit_items:[],typeOptions:["int","float","bool","ref","str"],selectType:"int",visible:!1}},mounted:function(){this.$emit("change",null)},computed:Object(n["a"])({lenItem:function(){return this.emit_items.length}},Object(u["c"])(["repr","allRefable"])),methods:{addItem:function(){var e=0!=this.items.length&&!0!==this.items.slice(-1)[0].edit;if(!e){var t=this.selectType,a=0;"bool"==t?a=!1:"ref"==t&&(a=""),this.items.push({type:t,value:a})}},changeRefSelect:function(e,t){e=this.allRefable[e],e.startsWith("@")||(e="@"+e),this.items[t].value=e,this.items[t].edit=!0},delItem:function(e,t){i["a"].delete(this.items,t)},inputChange:function(e,t){this.items[t].value=e,this.items[t].edit=!0,console.log("get value",e,t)},lineChange:function(e,t){this.items[t].value=e.target.value,this.items[t].edit=!0,console.log("get value",e,t)},handleOk:function(e){this.$emit("change",this.items.map((function(e){return e.value}))),this.emit_items=this.items,this.items=[],this.visible=!1},handleCancel:function(e){this.visible=!1},setVisible:function(e){this.visible=e}}}),oe=se,le=Object(g["a"])(oe,ie,re,!1,null,null,null),ce=le.exports,ue={props:{defaultValue:{type:[Object,Number,String,Boolean,Array]},args:Object,name:String,ranges:null,type:{type:String,default:"Any"}},name:"ArgItem",data:function(){return{isolat_value:null,valueFromRefs:!1,timer:null,alertValue:""}},components:{List:ce},computed:Object(n["a"])({},Object(u["c"])(["repr","allRefable"])),methods:{changeRefSelect:function(e){console.log("change ref select",e,this.allRefable[e]),e=this.allRefable[e],e.startsWith("@")||(this.isolat_value="@"+e),this.$emit("emitValue",this.isolat_value),console.log("set value ",this.isolat_value)},setValueFromRefs:function(e){var t=this;this.timer=setTimeout((function(){t.valueFromRefs=e}),1e3)},clearTimeout:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){console.log("clean time out "),clearTimeout(this.timer)})),changeChoicesSelect:function(e,t){console.log("set choices",e,this.args.choices[e.key],t),this.$emit("emitValue",this.args.choices[e.key])},lineChange:function(e){this.$emit("emitValue",e.target.value)},tupleChange:function(e){e=e.target.value;var t=/^\([0-9,]+\)$/gm,a=t.exec(e);null!=a?(this.$emit("emitValue",e),this.alertValue=""):this.alertValue="tuple format: ([0-9,])."},inputChange:function(e){this.$emit("emitValue",e)}}},de=ue,fe=Object(g["a"])(de,ae,ne,!1,null,null,null),pe=fe.exports,he=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("li",[a("a",[e._v(e._s(e.currentDir))]),a("a",{attrs:{type:"float:right"}},[a("a-switch",{attrs:{"checked-children":"hidden","default-checked":""}})],1)]),a("a-list",{attrs:{"item-layout":"horizontal"}},[a("RecycleScroller",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.handleInfiniteOnLoad,expression:"handleInfiniteOnLoad"}],staticStyle:{height:"320px"},attrs:{items:e.items.slice(0,e.index),"item-size":32,"key-field":"value","infinite-scroll-disabled":e.busy,"infinite-scroll-distance":10},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.item;return a("a-list-item",{on:{click:function(t){return e.fetchFiles(n.value,n.type)}}},[a("a-icon",{attrs:{type:n.type}}),a("li",{attrs:{type:"float:left"}},[e._v(e._s(n.value))]),"rollback"!=n.type?a("a-button",{attrs:{icon:"plus",size:"small"},on:{click:function(t){return t.stopPropagation(),e.setDirText(n.value)}}}):e._e()],1)}}])})],1),a("a-input-search",{attrs:{placeholder:"input dir",size:"small"},on:{search:e.addDirTexts},model:{value:e.dirText,callback:function(t){e.dirText=t},expression:"dirText"}},[a("a-button",{attrs:{slot:"enterButton"},slot:"enterButton"},[a("a-icon",{attrs:{type:"plus"}})],1)],1),a("a-list",{staticStyle:{height:"96px"},attrs:{"item-layout":"horizontal"}},e._l(e.retDirTexts,(function(t,n){return a("a-list-item",{key:n},[a("li",[e._v(e._s(t))])])})),1)],1)},me=[],be=(a("4de4"),a("487a")),ve=a.n(be),ge=a("e508"),ye=(a("a899"),{name:"FileBox",directives:{infiniteScroll:ve.a},components:{RecycleScroller:ge["a"]},data:function(){return{currentDir:"~",files:[],index:15,loading:!1,busy:!1,page:10,isHiddenFile:!0,dirText:"",retDirTexts:[]}},computed:{items:function(){var e=this.files;return this.isHiddenFile&&(e=this.files.filter((function(e){if("."!=e.value[0]|".."==e.value)return!0}))),e}},watch:{retDirTexts:function(e){console.log("sendArg",e),this.$emit("sendArgData",e)}},mounted:function(){var e=this;this.getFileList({type:"init"}).then((function(t){e.files=t["data"],e.currentDir=t["origin"]}))},methods:Object(n["a"])(Object(n["a"])({},Object(u["b"])(["getFileList"])),{},{fetchFiles:function(e,t){var a=this;"file"!=t&&this.getFileList({dir:e,origin:this.currentDir}).then((function(e){a.files=e["data"],a.currentDir=e["origin"]}))},handleInfiniteOnLoad:function(){this.index<this.items.length&&(this.index+=this.page)},setDirText:function(e){this.dirText=this.currentDir+"/"+e},addDirTexts:function(e){this.retDirTexts.push(e)}})}),je=ye,_e=Object(g["a"])(je,he,me,!1,null,null,null),we=_e.exports,Oe={data:function(){return{lambda:{argValue:[],argLists:["x0","x1","x2","x3","x4"],line:""},argData:{},funcOutputs:{},op:"",parameterValue:{}}},name:"Factory",components:{ArgItem:pe,FileBox:we,Parameter:R},computed:Object(n["a"])({},Object(u["c"])("factory",["lockedStatus","functionData"])),methods:Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(u["b"])(["save"])),Object(u["d"])("observers",["addObserverByFunction","addObserverByLambda","addObserverByFileCreator"])),Object(u["d"])("factory",["delCurrentFunction","setLocked"])),Object(u["d"])("views",{setParameterStore:"addParameter"})),{},{setFuncOutputIndex:function(e){if(e=String(e),Object.keys(this.funcOutputs).includes(e))this.funcOutputs[e]=!this.funcOutputs[e];else{for(var t=0;t<this.functionData.returns.length;t++)this.funcOutputs[t]=!1;this.funcOutputs[e]=!0}this.funcOutputs=Object(n["a"])({},this.funcOutputs)},mouseenterDom:function(){var e=0!==Object.keys(this.functionData).length;e&&this.setLocked(!0)},submitFunction:function(){switch(this.functionData.type){case"lambda":this.addObserverByLambda(Object(n["a"])(Object(n["a"])({},this.lambda),{},{op:this.op}));break;case"file":this.addObserverByFileCreator(this.argData.dirs);break;case"parameter":this.setParameterStore(this.parameterValue);break;default:this.functionData.outputs=this.funcOutputs,this.addObserverByFunction({funcData:this.functionData,args:this.argData,op:this.op}),this.save();break}this.delCurrentFunction(),this.setLocked(!1)},sortObj:function(e){return Object.values(e).sort((function(e,t){return e.index-t.index}))},setArgValue:function(e,t){console.log("get arg event",t,e),this.argData[t]=e},setOp:function(e){this.op=e},setParameter:function(e){this.parameterValue=e}})},xe=Oe,ke=(a("ff1b"),Object(g["a"])(xe,ee,te,!1,null,"fc379cd2",null)),Se=ke.exports,Ce={name:"Element",components:{Factory:Se},data:function(){return{activeKey:["cv2"],seach_feild:"",history:[]}},methods:Object(n["a"])(Object(n["a"])({},Object(u["d"])("factory",["setCurrentFunction"])),{},{submitElement:function(e){this.lockedStatus?this.$message.info("Current factory is occupied!"):(this.history.includes(e.name)||this.history.unshift(e.name),this.setCurrentFunction(e))}}),computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(u["c"])(["allElements"])),Object(u["c"])("factory",["lockedStatus","functionData"])),{},{elements:function(){if(this.seach_feild){var e={};for(var t in this.allElements){var a={};for(var n in this.allElements[t]){var i=-1!=n.indexOf(this.seach_feild);i&&(a[n]=this.allElements[t][n])}e[t]=a}return e}return this.allElements}})},Re=Ce,Ve=(a("502f"),Object(g["a"])(Re,Q,Z,!1,null,"41432c8e",null)),De=Ve.exports,Te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[e.selectStatus?[a("a-select",{attrs:{"option-label-prop":"label"},on:{change:e.selectChange},scopedSlots:e._u([{key:"dropdownRender",fn:function(t){return a("div",{},[a("v-nodes",{attrs:{vnodes:t}}),a("a-divider",{staticStyle:{margin:"4px 0"}}),a("div",{staticStyle:{padding:"4px 8px",cursor:"pointer"},on:{mousedown:function(e){return e.preventDefault()},click:e.switchToNewItem}},[a("a-icon",{attrs:{type:"plus"}}),e._v(" New ")],1)],1)}}],null,!1,1304416932),model:{value:e.group,callback:function(t){e.group=t},expression:"group"}},e._l(e.groupList,(function(t){return a("a-select-option",{key:t,staticClass:"delete-icon",attrs:{value:t,label:t}},[e._v(" "+e._s(t)+" "),a("a-icon",{staticStyle:{position:"absolute",top:"30%",right:"10%"},attrs:{type:"delete"},on:{click:function(a){return a.stopPropagation(),e.deleteItem(t)}}})],1)})),1)]:[a("a-input",{attrs:{placeholder:"enter a new name"},on:{pressEnter:e.finishNewEdit},model:{value:e.editNameValue,callback:function(t){e.editNameValue=t},expression:"editNameValue"}},[a("a-icon",{attrs:{slot:"addonAfter",type:"enter"},on:{click:e.finishNewEdit},slot:"addonAfter"})],1)]],2)},Ie=[],ze=(a("a434"),{name:"editSelect",components:{VNodes:{functional:!0,render:function(e,t){return t.props.vnodes}}},data:function(){return{selectStatus:!0,groupListValue:void 0,groupValue:void 0,editNameValue:""}},computed:Object(n["a"])(Object(n["a"])({},Object(u["e"])({configNamesX:function(e){return e.confignames}})),{},{group:{get:function(){return void 0==this.groupValue?this.configNamesX.current:this.groupValue},set:function(e){this.groupValue=e}},groupList:{get:function(){return void 0==this.groupListValue?this.configNamesX.names:this.groupListValue},set:function(e){this.groupListValue=e}}}),methods:Object(n["a"])(Object(n["a"])({},Object(u["b"])(["setCurrentConfigNameAndReload"])),{},{deleteItem:function(e){var t=this;return Object(T["a"])(regeneratorRuntime.mark((function a(){var n,i,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,E.a.delete("api/config/"+e);case 2:n=a.sent,"success"==n.data.type&&(i=t.groupList,r=i.indexOf(e),i.splice(r,1),t.groupList=i);case 4:case"end":return a.stop()}}),a)})))()},selectChange:function(e){console.log("select change",e),this.setCurrentConfigNameAndReload(e)},switchToNewItem:function(){this.selectStatus=!1},finishNewEdit:function(){var e=this.groupList;e.splice(0,0,this.editNameValue),this.groupList=e,this.group=this.editNameValue,this.selectStatus=!0,this.setCurrentConfigNameAndReload(this.group)}})}),Pe=ze,Ee=Object(g["a"])(Pe,Te,Ie,!1,null,null,null),Ne=Ee.exports,Le=a("fb19"),Ae=a.n(Le),Fe={components:{Relations:j,Viewer:U,Observer:J,Element:De,editSelect:Ne},name:"App",data:function(){return{clientHeight:document.body.clientHeight,width:0,height:0,x:0,y:0}},created:function(){this.initStore()},mounted:function(){var e=this;window.onresize=function(){return function(){e.clientHeight=document.body.clientHeight}()}},watch:{clientHeight:function(e){if(!this.timer){this.clientHeight=e,this.timer=!0;var t=this;setTimeout((function(){console.log(t.clientHeight),t.timer=!1}),400)}}},methods:Object(n["a"])({onResize:function(e,t,a,n){this.x=e,this.y=t,this.width=a,this.height=n},onDrag:function(e,t){this.x=e,this.y=t}},Object(u["b"])(["initStore"]))},$e=Fe,He=(a("034f"),Object(g["a"])($e,s,o,!1,null,null,null)),Ke=He.exports,Be={initStore:function(e){return Object(T["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,e.state,t.next=3,E.a.get("api/elements");case 3:return n=t.sent,a("setElements",n.data),t.next=7,E.a.get("api/config");case 7:return n=t.sent,a("initConfigNames",n.data),t.next=11,E.a.get("api/observers");case 11:n=t.sent,a("observers/setObervers",n.data.observers),a("relations/setRelations",n.data.relations),a("views/setParameter",n.data.parameters);case 15:case"end":return t.stop()}}),t)})))()},getFileList:function(e,t){return Object(T["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.commit,"init"!=t.type){a.next=7;break}return a.next=4,E.a.get("api/file/listdir/");case 4:n=a.sent,a.next=10;break;case 7:return a.next=9,E.a.post("api/file/listdir/",{dirs:t.dir,origin:t.origin});case 9:n=a.sent;case 10:return a.abrupt("return",n.data);case 11:case"end":return a.stop()}}),a)})))()},save:function(e){return Object(T["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.commit,a=e.state,console.log("post observers",a.observers.data),t.next=4,E.a.post("api/observers",{observers:a.observers.data,relations:a.relations.data,parameters:a.views.parameters});case 4:case"end":return t.stop()}}),t)})))()},setCurrentConfigNameAndReload:function(e,t){return Object(T["a"])(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.state,e.commit,n=e.dispatch,a.next=3,E.a.put("api/config/"+t);case 3:i=a.sent,"success"==i.data.type&&n("initStore",{});case 5:case"end":return a.stop()}}),a)})))()}},We=Be,Ue=(a("a15b"),a("99af"),a("6821"),{allElements:function(e){return e.elements},allRefable:function(e){var t=[];for(var a in e.observers.data)t.push(a);for(var n in e.relations.data)t.push(n);for(var i in e.views.parameters)t.push(i);for(var r in e.elements)for(var s in e.elements[r])t.push(r+"."+s);return t},repr:function(e){return function(t){if(d(t)){if(t.includes("."))return t;"@"==t[0]&&(t=t.slice(1))}if(Object.keys(e.observers.data).includes(t)){var a=e.observers.data[t],n="";if(a.op&&(n=a.op+":"),"lambda"==a.type){var i=a.args.args.value;return i&&(i=i.join(",")),n+"λ ("+i+")=>"+a.line}if("func"!=a.type)return n+a.name;var r=[];for(var s in a.args){var o,l=a.args[s],c=l.type,u=l.name,f=l.value,p=l.title_tag;if(p){if("list"==c)o="".concat(u,"=").concat(f.length);else if(d(f)&&"@"==f[0]){var h=e.observers.data[f.slice(1)];o=h?"".concat(u,"=").concat(h.name):"".concat(u,"=").concat(f)}else o="".concat(u,"=").concat(f);r.push(o)}}return r?n+a.name+":"+r.join(""):n+a.name}return Object.keys(e.views.parameters).includes(t)?(a=e.views.parameters[t],t):Object.keys(e.relations.data).includes(t)?(a=e.relations.data[t],t):"parse error"}},briefKeys:function(e){var t=[];for(var a in e.observers.data)t.push(a.slice(0,5));for(var n in e.elements)for(var i in e.elements[n])t.push(n+"."+i);return t}}),Ye=Ue,Me=(a("6821"),a("4979"),{setElements:function(e,t){return e.elements=t},initConfigNames:function(e,t){var a=t.type,n=t.current,i=t.names;"success"==a&&(e.confignames.current=n,e.confignames.names=i)}}),Xe=Me,qe={locked:!1,data:{}},Ge={lockedStatus:function(e){return e.locked},functionData:function(e){return e.data}},Je={setLocked:function(e,t){e.locked=t},setCurrentFunction:function(e,t){"lambda"==t.type?e.data={type:"lambda",line:""}:(e.data=Object(n["a"])({},t),"undefined"==typeof e.data.type&&(e.data.type="callable")),console.log("set current func",e.data)},delCurrentFunction:function(e){e.data=null}},Qe={namespaced:!0,state:qe,getters:Ge,mutations:Je},Ze=a("ec26"),et=(a("6821"),a("4979"),{index:-1,data:{},contentChangeTimes:0}),tt={relationChange:function(e){return e.contentChangeTimes},keys:function(e){return Object.keys(e.data)}},at={setIndex:function(e,t){e.index=t},setRelations:function(e,t){e.data=t},newRelation:function(e,t){var a="OBS_"+Object(Ze["a"])().substring(0,4);i["a"].set(e.data,a,{type:"observerable",from:"core",name:"build_observerable",args:{head:{kind:"POSITIONAL_OR_KEYWORD",value:"@"+t},pipe:{kind:"POSITIONAL_OR_KEYWORD",type:"list",value:[]}}}),e.contentChangeTimes+=1},newSubject:function(e,t){var a="Subject_"+Object(Ze["a"])().substring(0,4);i["a"].set(e.data,a,{type:"subject",from:"core",name:"build_subject",args:{head:{kind:"POSITIONAL_OR_KEYWORD",value:"@"+t}}}),e.contentChangeTimes+=1},newSubscribe:function(e,t){var a="HEAD_"+Object(Ze["a"])().substring(0,4);i["a"].set(e.data,a,{type:"subscribe",from:"core",name:"build_subsribe",args:{head:{kind:"POSITIONAL_OR_KEYWORD",value:"@"+t},subscribe:{kind:"POSITIONAL_OR_KEYWORD",value:null}}}),e.contentChangeTimes+=1},addPipe:function(e,t){var a=t.key,n=t.pipe_uuid;i["a"].set(e.data[a].args.pipe.value,e.data[a].args.pipe.value.length+1,"@"+n),e.contentChangeTimes+=1},setSubscribe:function(e,t){var a=t.key,n=t.subscribe_uuid;console.log(a,n),e.data[a].args.subscribe.value="@"+n,e.contentChangeTimes+=1},swapPipes:function(e,t){var a=t.relationIndex,n=t.oldIndex,i=t.newIndex,r=e.data[a].args.pipe.value,s=r.slice(n,1);r.slice(i,0,s),e.data[a].args.pipe.value=r,e.contentChangeTimes+=1},deleteRelation:function(e,t){console.log("relation index",t),i["a"].delete(e.data,t),e.contentChangeTimes+=1},deletePipe:function(e,t){var a=t.key,n=t.pipe_index;i["a"].delete(e.data[a].args.pipe.value,n),e.contentChangeTimes+=1},cleanSubscribe:function(e,t){i["a"].set(e.data[t].args.subscribe,"value",null),e.contentChangeTimes+=1}},nt={namespaced:!0,state:et,getters:tt,mutations:at},it=a("6821"),rt=a("4979"),st={data:{}},ot={allObserver:function(e){return Object.keys(e.data).map((function(t){return Object(n["a"])({uuid:t},e.data[t])}))},keys:function(e){return Object.keys(e.data)},breifTitleByUUID:function(e){return function(t){var a=e.data[t];if("func"!=a.type)return a.name;var n=[];for(var i in a.args){var r,s=a.args[i],o=s.type,l=s.name,c=s.value,u=s.title_tag;if(u){if("list"==o)r="".concat(l,"=").concat(c.length);else if(d(c)&&"@"==c[0]){var f=e.data[c.slice(1,-1)];r=f?"".concat(l,"=").concat(f.name):"".concat(l,"=").concat(c)}else r="".concat(l,"=").concat(c);n.push(r)}}return n?a.name+":"+n.join(""):a.name}}},lt={setObervers:function(e,t){return e.data=t},editArgInObservers:function(e,t){var a=t.index,n=t.argname,r=t.key,s=t.value;i["a"].set(e.data[a].args[n],r,s)},deleteObservers:function(e,t){console.log("del",t.uuid),i["a"].delete(e.data,t.uuid)},addObserverByFunction:function(e,t){var a=t.funcData,n=t.args,r=t.op,s=a.outputs,o=(a.returns,a.name,r+a.name+":"),l=rt(a.args);Object.keys(n).forEach((function(e){l[e].value=n[e],l[e].choices=null})),Object.keys(l).forEach((function(e){var t=l[e];o+=e+"="+t.value+","}));var c=[];for(var u in s)s[u]&&(o+=u,c.push(parseInt(u)));var d=it(o),f={type:"func",from:a.from,uuid:d,name:a.name,output:c,op:r,args:l};i["a"].set(e.data,d,f)},addObserverByFileCreator:function(e,t){var a=t.join(""),n=it(a),r={type:"func",from:"custom",uuid:n,name:"glob_dirs",args:{dirs:{index:1,kind:"POSITIONAL_OR_KEYWORD",name:"dirs",type:"list",value:t}}};i["a"].set(e.data,n,r)},addObserverByLambda:function(e,t){var a=t.line,n=t.argValue,r=t.op,s=it(r+a),o={type:"lambda",from:"custom",line:a,args:{line:{index:0,kind:"POSITIONAL_OR_KEYWORD",type:"str",value:a},args:{index:1,kind:"POSITIONAL_OR_KEYWORD",type:"list",value:n}},op:r,uuid:s,name:"LAMBDA"};i["a"].set(e.data,s,o)}},ct={namespaced:!0,state:st,getters:ot,mutations:lt},ut={data:{},parameters:{},logs:[],ndarrayNormal:{},ndarrayROI:{}},dt={allParameters:function(e){return e.parameters},getNDArrayNormal:function(e){return function(t){return e.ndarrayNormal[t]}},getNDArrayROI:function(e){return function(t){return e.ndarrayROI[t]}}},ft={cleanLogs:function(e){e.logs=[]},SOCKET_emitResult:function(e,t){i["a"].set(e.logs,e.logs.length,t)},setNDArrayNormal:function(e,t){var a=t.type,n=t.post_id,r=t.data;"success"==a&&i["a"].set(e.ndarrayNormal,n,r)},setNDArrayROI:function(e,t){var a=t.type,n=t.post_id,i=t.data;"success"==a&&(e.ndarrayROI[n]=i)},setParameter:function(e,t){e.parameters=t},addParameter:function(e,t){var a=t.name,n=t.type,r=t.value;if(a){var s="parameter_"+a,o={tag:a,name:"parameter",from:"custom",args:{input_:{type:n,value:r}}};i["a"].set(e.parameters,s,o)}},delParameter:function(e,t){var a="parameter_"+t;i["a"].delete(e.parameters,a)}},pt={queryNDArray:function(e,t){return Object(T["a"])(regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.state,n=e.commit,a.next=3,E.a.post("api/ndarray",{ndid:t});case 3:i=a.sent,n("setNDArrayNormal",i.data);case 5:case"end":return a.stop()}}),a)})))()}},ht={namespaced:!0,state:ut,getters:dt,actions:pt,mutations:ft},mt={elements:{init:"initvalue"},confignames:{current:"undefined",names:[]},dirlists:[]};i["a"].use(u["a"]);var bt,vt,gt=new u["a"].Store({state:mt,getters:Ye,actions:We,mutations:Xe,modules:{factory:Qe,relations:nt,observers:ct,views:ht}}),yt=a("5132"),jt=a.n(yt);a("278f");i["a"].config.productionTip=!1,i["a"].use(r["a"]),i["a"].component("vue-draggable-resizable",Ae.a),bt=window.location.origin,vt={},i["a"].prototype.$apiurl=bt,i["a"].use(new jt.a(Object(n["a"])({connection:bt,allowEIO3:!0,vuex:{store:gt,actionPrefix:"SOCKET_",mutationPrefix:"SOCKET_"}},vt))),new i["a"]({store:gt,render:function(e){return e(Ke)}}).$mount("#app")},"5ee8":function(e,t,a){},"626f":function(e,t,a){"use strict";a("1e24")},"85ec":function(e,t,a){},c6bc:function(e,t,a){"use strict";a("f982")},ca41:function(e,t,a){},e0b3:function(e,t,a){},f982:function(e,t,a){},ff1b:function(e,t,a){"use strict";a("5ee8")}});
//# sourceMappingURL=app.f34d0ce6.js.map